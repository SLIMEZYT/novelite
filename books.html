<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Novelite ‚Äî Books</title>

<!-- ======= Loader & Nav Styles ======= -->
<style>
  /* ===== Loader ===== */
  .loader{
    position:fixed; inset:0; background:#fff;
    display:flex; align-items:center; justify-content:center; z-index:9999;
  }
  .quill{
    width:72px; height:72px; position:relative;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,.15));
  }
  .quill:before{
    content:"";
    position:absolute; inset:0;
    background:
      radial-gradient(circle at 70% 30%, #FFD700 0 10px, transparent 11px),
      linear-gradient(135deg, #FFD700 35%, #c9a200 36% 45%, #FFD700 46%);
    clip-path: polygon(30% 0, 100% 0, 70% 70%, 55% 100%, 45% 70%, 0 40%);
    border-radius:8px;
    animation: float 1.8s ease-in-out infinite;
  }
  .ink-ring{
    position:absolute; width:120px; height:120px; border-radius:50%;
    border:4px solid rgba(1,68,33,.08); animation: ripple 1.8s ease-out infinite;
  }
  @keyframes float{50%{transform: translateY(-6px) rotate(-2deg)}}
  @keyframes ripple{from{transform:scale(.7); opacity:1} to{transform:scale(1.2); opacity:0}}

  /* ===== Bottom Nav ===== */
  .bottom-nav{
    position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
    width: min(560px, 92%); display:flex; justify-content:space-between; align-items:center; gap:8px;
    padding:10px 12px; border-radius:22px;
    background: rgba(255,255,255,.08); backdrop-filter: blur(12px) saturate(150%);
    border:1px solid rgba(255,215,0,.25);
    box-shadow: 0 10px 30px rgba(0,0,0,.15); z-index:9000; animation: floatbar 4s ease-in-out infinite;
  }
  @keyframes floatbar{50%{transform:translateX(-50%) translateY(-3px)}}
  .nav-btn{
    flex:1; display:flex; flex-direction:column; align-items:center; gap:6px;
    padding:8px 6px; border-radius:14px; cursor:pointer; user-select:none;
    color:#0f0f0f; text-decoration:none; font-size:12px; font-weight:600;
    transition:.2s; position:relative; overflow:hidden;
  }
  .nav-btn .ico{font-size:18px}
  .nav-btn:hover{background:rgba(255,255,255,.25)}
  .nav-btn.active{background:rgba(255,215,0,.25); border:1px solid rgba(255,215,0,.25);}
  .nav-btn.active .ico, .nav-btn.active span{color:#014421}
</style>
</head>
<body>

<!-- LOADER -->
<div class="loader" id="loader">
  <div class="ink-ring"></div>
  <div class="quill"></div>
</div>

<!-- PAGE CONTENT -->
<section style="padding:20px; max-width:900px; margin:0 auto;">
  <h1>Saved Books</h1>
  <div id="booksContainer" style="display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:16px; margin-top:20px;"></div>
</section>

<!-- BOTTOM NAV -->
<nav class="bottom-nav" aria-label="Primary">
  <a class="nav-btn" href="index.html"><div class="ico">üè†</div><span>Home</span></a>
  <a class="nav-btn active" href="books.html"><div class="ico">üìñ</div><span>Books</span></a>
  <a class="nav-btn" href="write.html"><div class="ico">‚úçÔ∏è</div><span>Write</span></a>
  <a class="nav-btn" href="blog.html"><div class="ico">üì∞</div><span>Blog</span></a>
  <a class="nav-btn" href="#" id="navProfile"><div class="ico">üë§</div><span>Profile</span></a>
</nav>

<!-- ======= Scripts ======= -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'YOUR_SUPABASE_URL';
  const supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
  const supabase = createClient(supabaseUrl, supabaseAnonKey);

  const loader = document.getElementById('loader');
  window.addEventListener('load', ()=> {
    loader.style.opacity = '0';
    setTimeout(()=> loader.style.display='none', 250);
  });

  // ===== Fetch Saved Books =====
  const container = document.getElementById('booksContainer');
  async function loadBooks() {
    const { data, error } = await supabase.from('stories').select('*').order('id', {ascending:false});
    if(error){ container.innerHTML = `<p>Error loading books: ${error.message}</p>`; return; }
    if(!data || data.length===0){ container.innerHTML = `<p>No saved books yet.</p>`; return; }

    container.innerHTML = data.map(book=>`
      <div style="border:1px solid #ccc; border-radius:12px; overflow:hidden;">
        <div style="aspect-ratio:3/4; background:url('${book.cover}') center/cover"></div>
        <div style="padding:8px;">
          <strong>${book.title}</strong>
          <p style="font-size:12px; margin:4px 0;">by ${book.authorName}</p>
        </div>
      </div>
    `).join('');
  }
  loadBooks();

  // ===== Simple Online Timer =====
  setInterval(()=>{
    const now = new Date();
    document.title = `Books | ${now.toLocaleTimeString()}`;
  },1000);

</script>
</body>
</html>
